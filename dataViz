import numpy as np
import matplotlib.pyplot as plt
from iexCloud import get_price
from twitterAPI import getPostsByDay

print("Company Choices: \nWENDY'S \nDUNKIN DONUTS \nVIACOM \nDISNEY \nADIDAS \nNIKE")
comp  = input("Enter company as it appears above: ")
date1 = input("Enter start date from 20190402 - 20190430 (YYYYMMDD): ")
date2 = input("Enter end date from 20190402 - 20190430(YYYYMMDD): ")

compDictionary = {"NIKE": "nke", "ADIDAS": "addyy", "WENDY'S": "wen", 
"DUNKIN DONUTS": "dnkn", "DISNEY": "dis", "VIACOM": "viab"}

start = int(date1[6:]) - 2
end = int(date2[6:]) - 2 

t = range(1, int(date2) - int(date1) + 2)
data1 = get_price(compDictionary[comp], date1, date2)
data2 = getPostsByDay(comp, start, end) #date end - 2

fig, ax1 = plt.subplots()

plt.title(comp + " Social Media and Stock Comparison")
color = 'tab:red'
ax1.set_xlabel('Days')
ax1.set_ylabel('Share Price ($)', color=color)
ax1.plot(t, data1, color=color)
ax1.tick_params(axis='y', labelcolor=color)

ax2 = ax1.twinx()  # instantiate a second axes that shares the same x-axis

color = 'tab:blue'
ax2.set_ylabel('Twitter Account Activity', color=color)  # we already handled the x-label with ax1
ax2.plot(t, data2, color=color)
ax2.tick_params(axis='y', labelcolor=color)

fig.tight_layout()  # otherwise the right y-label is slightly clipped
plt.show()
